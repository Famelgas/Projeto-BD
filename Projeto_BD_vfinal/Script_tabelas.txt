CREATE TABLE ator (
	nome		 VARCHAR(512),
	data_nascimento	 VARCHAR(512),
	local_de_nascimento VARCHAR(512),
	genero		 VARCHAR(512),
	nacionalidade	 VARCHAR(512),
	PRIMARY KEY(nome)
);

CREATE TABLE realizador (
	nome		 VARCHAR(512),
	data_de_nascimento	 VARCHAR(512),
	local_de_nascimento VARCHAR(512),
	genero		 VARCHAR(512),
	nacionalidade	 VARCHAR(512),
	PRIMARY KEY(nome)
);

CREATE TABLE produto (
	numero_do_produto		 NUMERIC(8,2),
	nome_do_produto		 VARCHAR(512),
	produtor			 VARCHAR(512),
	detalhes			 VARCHAR(512),
	tipo				 VARCHAR(512),
	preco				 NUMERIC(8,2),
	validade			 FLOAT(8),
	idade_recomendada		 NUMERIC(8,2),
	administrador_utilizador_email VARCHAR(512) NOT NULL,
	PRIMARY KEY(numero_do_produto)
);

CREATE TABLE administrador (
	estatisticas	 VARCHAR(512),
	utilizador_email VARCHAR(512),
	PRIMARY KEY(utilizador_email)
);

CREATE TABLE cliente (
	saldo		 NUMERIC(8,2),
	id_de_utilizador NUMERIC(8,2),
	artigos_alugados NUMERIC(8,2),
	utilizador_email VARCHAR(512),
	PRIMARY KEY(utilizador_email)
);

CREATE TABLE utilizador (
	email	 VARCHAR(512),
	password VARCHAR(512),
	nome	 VARCHAR(512),
	idade	 INTEGER,
	PRIMARY KEY(email)
);

CREATE TABLE historico (
	preco_antigo		 FLOAT(8),
	data			 TIMESTAMP,
	produto_numero_do_produto NUMERIC(8,2) NOT NULL
);

CREATE TABLE mensagem (
	id				 INTEGER,
	titulo			 VARCHAR(512),
	mensagem			 VARCHAR(512),
	data_envio			 TIMESTAMP,
	administrador_utilizador_email VARCHAR(512) NOT NULL,
	PRIMARY KEY(id)
);

CREATE TABLE aluguer (
	data_final		 TIMESTAMP,
	preco			 NUMERIC(8,2),
	data_registo		 TIMESTAMP,
	cliente_utilizador_email	 VARCHAR(512) NOT NULL,
	produto_numero_do_produto NUMERIC(8,2) NOT NULL
);

CREATE TABLE read_check (
	lida			 BOOL,
	mensagem_id		 INTEGER NOT NULL,
	cliente_utilizador_email VARCHAR(512) NOT NULL
);

CREATE TABLE produto_realizador (
	produto_numero_do_produto NUMERIC(8,2),
	realizador_nome		 VARCHAR(512),
	PRIMARY KEY(produto_numero_do_produto,realizador_nome)
);

CREATE TABLE ator_produto (
	ator_nome		 VARCHAR(512),
	produto_numero_do_produto NUMERIC(8,2),
	PRIMARY KEY(ator_nome,produto_numero_do_produto)
);

ALTER TABLE produto ADD CONSTRAINT produto_fk1 FOREIGN KEY (administrador_utilizador_email) REFERENCES administrador(utilizador_email);
ALTER TABLE administrador ADD CONSTRAINT administrador_fk1 FOREIGN KEY (utilizador_email) REFERENCES utilizador(email);
ALTER TABLE cliente ADD CONSTRAINT cliente_fk1 FOREIGN KEY (utilizador_email) REFERENCES utilizador(email);
ALTER TABLE historico ADD CONSTRAINT historico_fk1 FOREIGN KEY (produto_numero_do_produto) REFERENCES produto(numero_do_produto);
ALTER TABLE mensagem ADD CONSTRAINT mensagem_fk1 FOREIGN KEY (administrador_utilizador_email) REFERENCES administrador(utilizador_email);
ALTER TABLE aluguer ADD CONSTRAINT aluguer_fk1 FOREIGN KEY (cliente_utilizador_email) REFERENCES cliente(utilizador_email);
ALTER TABLE aluguer ADD CONSTRAINT aluguer_fk2 FOREIGN KEY (produto_numero_do_produto) REFERENCES produto(numero_do_produto);
ALTER TABLE read_check ADD CONSTRAINT read_check_fk1 FOREIGN KEY (mensagem_id) REFERENCES mensagem(id);
ALTER TABLE read_check ADD CONSTRAINT read_check_fk2 FOREIGN KEY (cliente_utilizador_email) REFERENCES cliente(utilizador_email);
ALTER TABLE produto_realizador ADD CONSTRAINT produto_realizador_fk1 FOREIGN KEY (produto_numero_do_produto) REFERENCES produto(numero_do_produto);
ALTER TABLE produto_realizador ADD CONSTRAINT produto_realizador_fk2 FOREIGN KEY (realizador_nome) REFERENCES realizador(nome);
ALTER TABLE ator_produto ADD CONSTRAINT ator_produto_fk1 FOREIGN KEY (ator_nome) REFERENCES ator(nome);
ALTER TABLE ator_produto ADD CONSTRAINT ator_produto_fk2 FOREIGN KEY (produto_numero_do_produto) REFERENCES produto(numero_do_produto);